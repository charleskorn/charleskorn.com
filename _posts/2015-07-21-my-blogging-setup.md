---
layout: post
title:  My blogging setup
date:   2015-07-21 21:48:00 +10:00
tags:   meta blogging jekyll github-pages
---

The purpose of this post is to document what I'm using to run this blog (and thus serve as some kind of prompt when I'm trying to 
fix stuff in six months' time) and hopefully also help you set up your own blog.

The *tl;dr* version: [Jekyll](http://jekyllrb.com/) + [GitHub Pages](https://pages.github.com/) + custom domain name = 
[charleskorn.com](http://charleskorn.com)

# Hosting

I use [GitHub Pages](https://pages.github.com/) to host this blog. If you've never heard of GitHub Pages before, it is a 
completely free static website hosting service provided by GitHub. As you might expect with something coming from GitHub, 
each site is backed by a Git repository (mine is 
[charleskorn/charleskorn.github.io](https://github.com/charleskorn/charleskorn.github.io), for example). This means you
instantly get things like version history, backups and offline editing with zero extra effort. 

You can use GitHub Pages to create a site for a user (which is what I have done for this site), a single repository or an 
organisation. More details on the differences are explained in the 
[help area](https://help.github.com/articles/user-organization-and-project-pages/).

You can use it to host purely static content, or you can have your final HTML generated by the [Jekyll](http://jekyllrb.com/)
static site generator, which is what I use. As soon as you push your changes up to your GitHub repository, all the static files
are automatically regenerated within a matter of seconds. 

With Jekyll, you write your posts as [Markdown](https://en.wikipedia.org/wiki/Markdown) files, and then it
generates HTML from your posts based on [templates](http://jekyllrb.com/docs/templates/) that you define. 
It also has built in [SASS and CoffeeScript compilation](http://jekyllrb.com/docs/assets/), RSS feed generation and 
support for [permalinks](https://en.wikipedia.org/wiki/Permalink), amongst other things. It's also straightforward to set up
[a custom 404 page](https://github.com/charleskorn/charleskorn.github.io/blob/master/404.md).

**Side note**: as you can imagine, some features of Jekyll are restricted by GitHub. For example, there is
[a limited set of allowed plugins](https://help.github.com/articles/using-jekyll-plugins-with-github-pages/), but by and 
large, you can use the full functionality of the core Jekyll project. If you need more flexibility, you can always [generate
the pages yourself and push the result up to a branch called `gh-pages`](https://help.github.com/articles/creating-project-pages-manually/),
or just [turn Jekyll processing off altogether](https://help.github.com/articles/using-jekyll-with-pages/#turning-jekyll-off).
(We use this technique for the [ThoughtWorks LevelUp website](https://github.com/twlevelup/twlevelup.github.io), for example.)

The final missing piece of the puzzle is setting up [a custom domain name](https://help.github.com/articles/about-custom-domains-for-github-pages-sites/)
to point at the site hosted by GitHub. This is fairly straightforward to do. It requires 
[creating a `CNAME` file](https://help.github.com/articles/adding-a-cname-file-to-your-repository/)
in the root directory of your repository with the domain name you'd like your site to use 
([you can see mine](https://github.com/charleskorn/charleskorn.github.io/blob/master/CNAME) for an example),
and then [configuring your DNS server to point at GitHub's servers](https://help.github.com/articles/adding-a-cname-file-to-your-repository/#next-steps-configuring-dns-settings).

# Writing process

My writing process looks something like this at the moment:

* `bundle exec jekyll draft "My cool new article"`
* `bundle exec guard`
* writing, checking a live preview in my browser
* [procras](https://www.youtube.com)[tinating](https://feedly.com)
* more writing
* [editing](http://www.hemingwayapp.com/) and [proofreading](http://www.polishmywriting.com/)
* `bundle exec jekyll publish _drafts/my-cool-new-article.md`
* `git commit -m "My cool new article"`
* `git push`

Not all of this is built in to Jekyll:

The `jekyll draft` and `jekyll publish` commands come from a handy plugin called [jekyll-compose](https://github.com/jekyll/jekyll-compose).
They don't do anything you couldn't do yourself -- `jekyll draft` just sets up the scaffolding of a draft post and `jekyll publish` just
moves that post into the `_posts` folder and adds the date to the file and [the front matter](http://jekyllrb.com/docs/frontmatter/#predefined-variables-for-posts)
-- but they certainly make things that little bit easier.

There are a couple of things that work together to produce live previews in a browser. 
The [guard-jeykll-plus](https://github.com/imathis/guard-jekyll-plus) plugin for [guard](https://github.com/guard/guard) 
makes use of [Jekyll's built-in auto-regeneration support](http://jekyllrb.com/docs/configuration/#build-command-options) 
to automatically regenerate the site when any change is detected. Once that's done, the [guard-livereload](https://github.com/guard/guard-livereload)
plugin sends a notification to [a small JavaScript snippet embedded into every page](https://github.com/charleskorn/charleskorn.github.io/blob/master/_includes/livereload.html)
to trigger a reload once the build process is finished.

# SEO

I also used the opportunity of setting up this blog to learn about some standard SEO practices for websites (given the topic sometimes
comes up in [my day job](http://info.thoughtworks.com/graduates)).

The first thing was setting up [Google Analytics](https://www.google.com/analytics/) (for traffic reporting and analysis) 
and [Google Webmaster Tools](https://www.google.com/webmasters/) (for alerts from Google when something goes awry).
The easiest way to do this is to use [Google Tag Manager](https://www.google.com/analytics/tag-manager/). 
This makes it easy to manage all the necessary JavaScript tags for your site, and only requires [a single 
JavaScript tag](https://github.com/charleskorn/charleskorn.github.io/blob/master/_includes/gtm.html)
on your pages -- the rest are inserted dynamically based on your configuration.

The next step was adding an [XML sitemap](https://en.wikipedia.org/wiki/Sitemaps), which helps search engines discover all of the pages
on your site. This is can be generated for you as part of the Jekyll build process by the [jekyll-sitemap plugin](https://github.com/jekyll/jekyll-sitemap).

However, simply generating the sitemap isn't enough -- you also need to tell Google about it. You can 
[use Webmaster Tools to do this instantly](https://support.google.com/webmasters/answer/183669),
or [list it in your robots.txt](https://en.wikipedia.org/wiki/Sitemaps#Search_engine_submission) and Google's crawler will
pick it up next time it indexes your site. Furthermore, when the content on your site changes, it's a good idea to 
[ping Google to let it know](http://stackoverflow.com/questions/1332601/pinging-google-sitemap-after-every-new-article-submission).
I have [a Travis CI job](https://github.com/charleskorn/charleskorn.github.io/blob/master/.travis.yml) set up to do this 
automatically whenever I push changes to GitHub. (This also checks for simple issues like broken links and malformed HTML using 
[html-proofer](https://github.com/gjtorikian/html-proofer).) It's a similar process for other search engines as well. 

Another thing that I'm not 100% sold on the value of is [schema.org markup](http://schema.org/). The idea is that you decorate your
HTML with extra attributes that describe what their content means, for example, that a `span` contains the author's name, or that 
a `h2` is the blog post title. It enables some of the extra information you sometimes see next to search results such as the date the
post was written and the author's name, but I'm not sure how much it helps with people actually finding content relevant to their query.
(Although I'm sure that if Google told us that it did impact search ranking, you can bet that it would be exploited within hours,
diminishing its usefulness somewhat.)
 
This turned out to be much longer than I expected... I hope you found this useful (even if this is just Future Charles reading this).
